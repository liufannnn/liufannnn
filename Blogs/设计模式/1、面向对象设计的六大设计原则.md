# 一、前言

| 缩写 | 英文名称 | 中文名称 |
| :- | :- | :- |
| SRP | Single Responsibility Principle | 单一职责原则 |
| OCP | Open Close Principle | 开闭原则 |
| LSP | Liskov Substitution Principle | 里氏替换原则 |
| LoD | Law of Demeter （ Least Knowledge Principle） | 迪米特法则（最少知道原则） |
| ISP | Interface Segregation Principle | 接口分离原则 |
| DIP | Dependency Inversion Principle | 依赖倒置原则 |

上表列出了面向对象设计的六大设计原则名称以及缩写。注意，<u>通常所说的 SOLID（上方表格缩写的首字母，从上到下）设计原则没有包含本篇介绍的迪米特法则，而只有其他五项</u>。另外，本篇不包含合成/聚合复用原则（CARP），因为笔者认为该原则没有其他六个原则典型，而且在实践中也不容易违背，有兴趣的同学可以自行查资料学习。

在以下章节，笔者将会按照难易程序排列，分别讲解阐述这些设计原则。并且会首先描述一个应用场景（需求点），然后利用 Swift 代码和 UML 类图结合方便理解。

> 注意：
>
> Java 里的接口在 Swift 和 Objective-C 里面叫做协议。虽然 Demo 是用 Swift 写的，但是因为协议的叫法比较小众，故后面一律用接口代替协议这个说法。

# 二、面向对象设计的六大设计原则

## 1、开闭原则（Open Close Principle）

### 1.1、定义

Software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.

一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。

### 1.2、需求实践

设计一个在线课程类：由于教学资源有限，开始的时候只有文字讲解的课程。 但是随着教学资源的增多，后来增加了视频课程，音频课程以及直播课程。

#### 1.2.1、不好的设计

```swift
class Course {
    var teacherName: String        // 讲师名称
    var courseName: String         // 课程名称
    var courseIntroduction: String // 课程介绍
    var courseContent: String      // 文字课程
}

// Course 类声明了最初的在线课程所需要的数据
//
// 接着按照上面所说的需求变更：增加了视频，音频，直播课程

class Course {
    var teacherName: String        // 讲师名称
    var courseName: String         // 课程名称
    var courseIntroduction: String // 课程介绍
    var courseContent: String      // 文字课程

    var videoURL: String           // 视频课程
    var audioURL: String           // 音频课程
    var liveURL: String            // 直播课程
}

// 很显然，这个设计不是一个好的设计：
// 1、随着需求的增加，需要反复修改之前创建的Course 类
// 2、给新增的类造成了不必要的冗余
```

之所以会造成上述两个缺陷，是因为该设计没有遵循对修改关闭，对扩展开放的开闭原则，而是反其道而行之：开放修改，而且不给扩展提供便利。

#### 1.2.2、较好的设计

```swift
class Course {
    var teacherName: String        // 讲师名称
    var courseName: String         // 课程名称
    var courseIntroduction: String // 课程介绍
}

class TextCourse: Course {
    var content: String            // 文字课程
}

class VideoCourse: Course {
    var url: String                // 视频课程
}

class AudioCourse: Course {
    var url: String                // 音频课程
}

class LiveCourse: Course {
    var url: String                // 直播课程
}

// 这样一来，上面的两个问题都得到了解决
// 1、随着课程类型不断增加，Course 类不用做任何修改
// 2、新增的课程继承自 Course 类，独有数据分属于不同的子类，数据没有任何冗余
```

### 1.3、UML 类图对比

![](https://github.com/liufannnn/liufannnn/blob/main/BlogImages/开闭原则UML类图.png?raw=true)

### 1.4、回读定义

Software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.

一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。

在需求设计之初，就要想清楚在该场景里哪些数据是一定不变的，哪些是很容易变动的。将后者抽象成<sup>[接口](#myfootnote1)</sup>或方法。

脚注：

1. <a name="myfootnote1">接口</a>: iOS 开发中的协议